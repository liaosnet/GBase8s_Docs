# Onbar 退出返回码   

|返回值|描述|
|:--|:--|
|2 through 34|These return codes are produced by XBSA. For more information, consult your storage-manager documentation and log files.|
|100|ON-Bar cannot find something in sysutils, the emergency boot file, or storage-manager catalogs that it needs for processing.<br />Check the ON-Bar activity log for messages that say what could not be found and try to resolve that problem. If the problem recurs, contact Technical Support.|
|104|Adstar Distributed Storage Manager (ADSM) is in generate-password mode.<br />ON-Bar does not support ADSM running in generate-password mode. For information about changing the ADSM security configuration, refer to your ADSM manual.|
|115|A critical dbspace is not in the set of dbspaces being cold-restored.|
|116|The onsmsync utility is already running.|
|117|The information contained in the sysutils database and the emergency boot file are inconsistent.|
|118|An error in tenant restore occurred since another tenant restore was in progress.|
|119|An error in tenant restore occurred since another restore was in progress.|
|120|An internal On-Bar error occurred when starting a tenant restore.|
|121|ON-Bar was unable to determine the list of dbspaces.|
|122|Deadlock detected.<br />The ON-Bar command is contending with another process. Try the ON-Bar command again.|
|123|The root dbspace was not in the cold restore.<br />You cannot perform a cold restore without restoring the root dbspace. To resolve the problem, try one of the following procedures:<br />- Bring the database server to quiescent or online mode and restore just the storage spaces that need to be restored.<br />- If the database server is offline, issue the onbar -r command to restore all the storage spaces.<br />- Make sure that the root dbspace and other critical dbspaces are listed on the command line or in the -f filename.|
|124|The buffer had an incomplete page during the backup.<br />For assistance, contact Technical Support.|
|126|Error processing the emergency boot file.<br />Check the ON-Bar activity log for descriptions of the problem and the emergency boot file for corruption such as non-ASCII characters or lines with varying numbers of columns. If the source of the problem is not obvious, contact Technical Support.|
|127|Could not write to the emergency boot file.<br />Often, an operating-system error message accompanies this problem. Check the permissions on the following files and directories:<br />- $GBASEDBTDIR/etc on UNIX or %GBASEDBTDIR%\etc on Windows<br />- The emergency boot file|
|128|Data is missing in the object description.<br />For assistance, contact Technical Support.|
|129|ON-Bar received a different object for restore than it had expected. (The backup object did not match.) The requested backup object might have been deleted or expired from the storage manager.<br />Run onsmsync to synchronize the sysutils database, emergency boot file, and storage-manager catalogs. For assistance, contact Technical Support.|
|130|Database server is not responding.<br />The database server probably failed during the backup or restore. Run the onstat - command to check the database server status and then:<br />- If the operation was a cold restore, restart it.<br />- If the operation was a backup or warm restore, restart the database server and try the backup or warm restore again.|
|131|A failure occurred in the interface between ON-Bar and the database server.<br />For assistance, contact Technical Support.|
|132|Function is not in the XBSA shared library.<br />Verify that you are using the correct XBSA for the storage manager. For information, consult your storage-manager manual.|
|133|Failed to load the XBSA library functions.<br />Verify that you are using the correct XBSA for the storage manager. Ensure that the BAR_BSALIB_PATH value in the onconfig file points to the correct location of the XBSA shared library. For information, consult your storage-manager manual.|
|134|User wants to restore a logical-log file that is too early.<br />You probably tried a point-in-log restore (onbar -r -l -n) after performing a separate physical restore. The specified logical log is too old to match the backups used in the physical restore. Perform either of the following steps:<br />- Rerun the physical restore from an older set of physical backups.<br />- Specify a later logical log in the -n option when you rerun the point-in-log restore. To find the earliest logical log that you can use, look at the emergency boot file. For assistance, contact Technical Support.|
|136|ON-Bar cannot warm restore the critical dbspaces.<br />Perform either of the following steps:<br />- Reissue the warm-restore command without listing any critical dbspaces.<br />- Shut down the database server and perform a cold restore.|
|137|The MAX_DBSPACE_COUNT was exceeded.<br />For assistance, contact Technical Support.|
|138|An XBSA error occurred.<br />Verify that you are using the correct XBSA for the storage manager. Also check the bar_act.log for XBSA error messages. For information, consult your storage-manager manual.|
|139|Either the XBSA version is missing from the sm_versions file or the incorrect XBSA version is in the sm_versions file.<br />Insert the correct XBSA version into the sm_versions file. For more information, consult your storage-manager manual.|
|140|A fake backup failed.<br />Try the fake backup with the onbar -b -F command again. Only GBase supports fake backups. If the fake backup fails again, contact Technical Support.|
|141|ON-Bar received an operating-system signal. Most likely, the user entered the Ctrl-C command to stop an ON-Bar process.<br />Fix the cause of the interruption and then try the ON-Bar command again.|
|142|ON-Bar was unable to open a file.<br />Verify that the named file exists and that the permissions are correct. Check the ON-Bar activity log for an operating-system error message.|
|143|ON-Bar was unable to create a child process.<br />If BAR_MAX_BACKUP is not 0, ON-Bar could not create child processes to perform the parallel backup or restore. The operating system probably ran out of resources. Either not enough memory is available to start a new process or no empty slot exists in the process table.<br /><br />Check the operating-system logs, the ON-Bar activity log, or the console.|
|144|The log backup was stopped because one or more blobspaces were down.<br />Attempt to restore the blobspace. If the restore fails, try the log backup with the onbar -l -O command again. Executing this command might make the blobspace unrestorable.|
|145|ON-Bar was unable to acquire more memory space.<br />Wait for system resources to free up and try the ON-Bar command again.|
|146|ON-Bar was unable to connect to the database server.<br />The network or the database server might be down. For assistance, contact Technical Support.|
|147|ON-Bar was unable to discover any storage spaces or logical logs to back up or restore.<br />For example, if you specify a point-in-time restore but use a datetime value from before the first standard backup, ON-Bar cannot build a list of storage spaces to restore. This return code also displays if you specify a whole-system restore without having performed a whole-system backup.<br /><br />Verify that the database server and the storage spaces are in the correct state for the backup or restore request. Contact Technical Support.|
|148|An internal SQL error occurred.<br />Provide Technical Support with the information from the ON-Bar activity log.|
|149|Either you entered the wrong ON-Bar syntax on the command line or entered an invalid or incorrect datetime value for your GLS environment.<br />Check the command that you tried against the usage message in the ON-Bar activity log. If that does not help, then try the command with quotes around the datetime value again. If your database locale is not English, use the GL_DATE or GL_DATETIME environment variables to set the date and time format.|
|150|Error collecting data from the onconfig file.<br />Check the permissions, format, and values in the onconfig file. Check that the ONCONFIG environment variable is set correctly.|
|151|The database server is in an incorrect state for this backup or restore request, or an error occurred while determining the database server state.<br />Either you attempted an operation that is not compatible with the database server mode or ON-Bar is unable to determine the database server state. For example, you cannot do a physical backup with the database server in recovery mode.<br />Check the error message in the ON-Bar activity log. If an ASF error occurred, the following message displays in the ON-Bar activity log:<br />  Fatal error initializing ASF; asfcode = code  <br />To determine the cause of the ASF error, refer to the ASF error code in this message and repeat the backup or restore command. If an ASF error did not occur, change the database server state and repeat the backup or restore command.|
|152|ON-Bar cannot back up the logical logs.<br />The logical logs are not backed up for either of the following reasons:<br />- If another log backup is currently running.<br />- If you perform a logical-log backup with the LTAPEDEV parameter set to /dev/null (UNIX) or NUL (Windows).<br />You receive this return code when no log backups can be done.<br />To enable log backups, change the LTAPEDEV parameter to a valid value.|
|153|ON-Bar cannot set the process group ID. If BAR_MAX_BACKUP is set to any value other than 1 and ON-Bar encounters an error setting the process group ID, this value is returned.<br />This message is a warning of a possible operating-system problem.|
|154|The ON-Bar user does not have the correct permissions.<br />You must be user root or gbasedbt or a member of the bargroup group on UNIX or a member of the GBase-Admin group on Windows to execute ON-Bar commands.|
|155|The GBASEDBTSERVER environment variable is not set.<br />Set the GBASEDBTSERVER environment variable to the correct database server name.|
|156|Backup or restore was not performed because the LTAPEDEV parameter value is not valid.<br />If LTAPEDEV is not set or /dev/null on UNIX, or if it is NUL on Windows, the logical logs are not backed up, and ON-Bar returns warning 152.|
|157|Error attempting to set the GBASEDBTSHMBASE environment variable to -1.<br />ON-Bar could not set GBASEDBTSHMBASE to -1. For assistance, contact either the system administrator or Technical Support.|
|158|An internal ON-Bar error occurred.<br />Contact Technical Support.|
|159|An unexpected error occurred.<br />Contact Technical Support.|
|160|External restore failed.<br />To determine what went wrong with the external restore, look at the bar_act.log and the online.log files. Ensure that you already performed the manual part of the external restore before you try the onbar-r -e command again to complete the external restore. If that does not work, try the external restore from a different external backup.|
|161|Restarted restore failed.<br />Verify that RESTARTABLE_RESTORE is set to ON and try the original restore again. For more information, check the ON-Bar activity log and database server message logs.|
|162|The ON-Bar log file cannot be a symbolic link.<br />Remove the symbolic link or change the onconfig file so that the ON-Bar parameters BAR_DEBUG_LOG or BAR_ACT_LOG point to non-symbolic linked files.|
|163|The ON-Bar log file must be owned by user gbasedbt.<br />Change the ownership of the log file to be owned by user gbasedbt or change the BAR_ACT_LOG or BAR_DEBUG_LOG values in the onconfig file to point to different log files.|
|164|Unable to open file.<br />The file or its directory permissions prevent it from being created or opened. Verify the permissions on the file and its directory.|
|177|An online dbspace was restored. This return code notifies the user that the -O option overrode the internal checks in ON-Bar.<br />You do not need to take any action.|
|178|The logical log was backed up while one or more blobspaces were down. This return code notifies the user that the -O option overrode the internal checks in ON-Bar.<br />Examine the data in the blobspace to determine which simple large objects you need to recreate. These blobspaces might not be restorable. For assistance, contact Technical Support.|
|179|ON-Bar created the chunk needed to restore the dbspace. This return code notifies the user that the -O option overrode the internal checks in ON-Bar.<br />You do not need to take any action.|
|180|ON-Bar could not create the chunk needed to restore the dbspace.<br />Create the chunk file manually. Try the restore without the -O option again.|
|181|ON-Bar expired an object that was needed for a backup or restore.<br />The onsmsync utility expired an object that might be needed for a restore. You probably specified onsmsync with the -O option. If you used the -O option by mistake, contact Technical Support to recover the object from the storage manager.|
|183|ON-Bar could not obtain the logical-log unique ID from the storage manager.<br>The backup of the specified logical log is missing. Query your storage manager to determine if the backup of the specified logical-log file exists and if it is restorable.|
|247|On UNIX, look in /tmp/bar_act.log and the file that the BAR_ACT_LOG parameter points to for clues. (The onbar-merger writes to /tmp/bar_act.log until it has enough information to read the onconfig file.) Resolve the problems that the bar_act.log describes and try the cold restore again. If the cold restore still fails, contact Technical Support.|
|252|For assistance, contact Technical Support.|